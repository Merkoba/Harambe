{% extends "base.html" %}

{% block head %}
<title>List</title>
<link rel="stylesheet" href="/static/css/admin.css">

<script>
    const page_size = `{{page_size}}`
    const def_page_size = {{def_page_size | tojson}}
</script>

<script src="/static/js/list.js"></script>
{% endblock %}

{% block body %}
<div id="top">
    <a class="action_button" href="/">&lt;&lt;</a>
    <div class="sep">|</div>
    <div title="Total storage stats of all files (on all pages)">Total: {{total}}</div>
    <div class="sep">|</div>
    <div title="This is the current page">Page {{page}}</div>
    <div class="sep">|</div>
    {% if page > 1 %}
    {% if use_password %}
    <a class="linkbutton" href="/list/{{page - 1}}?pw={{password}}" title="Go to the previous page">Prev</a>
    {% else %}
    <a class="linkbutton" href="/list/{{page - 1}}" title="Go to the previous page">Prev</a>
    {% endif %}
    {% else %}
    <div class="">Prev</div>
    {% endif %}
    <div class="sep">|</div>
    {% if next_page %}
    {% if use_password %}
    <a class="linkbutton" href="/list/{{page + 1}}?pw={{password}}" title="Go to the next page">Next</a>
    {% else %}
    <a class="linkbutton" href="/list/{{page + 1}}" title="Go to the next page">Next</a>
    {% endif %}
    {% else %}
    <div class="">Next</div>
    {% endif %}
    <select id="page_select" title="Show this number of items per page"></select>
    <div class="sep">|</div>
    <input id="filter" type="text" placeholder="Filter">
</div>

<div id="items">
    <div class="table">
        <div class="table-row table-header">
            <div class="table-cell">Name</div>
            <div class="table-cell">Size</div>
            <div id="age" class="table-cell underline">Age</div>
        </div>
        {% for file in files %}
        <div class="table-row item" data-name="{{file.name}}" data-size="{{file.size}}" data-date="{{file.nice_date}}" data-ago="{{file.ago}}" data-size="{{file.size}}" data-size_str="{{file.size_str}}">
            <div class="table-cell">
                <a href="/file/{{file.name}}" target="_blank">{{file.name}}</a>
            </div>

            <div class="table-cell">{{file.size_str}}</div>
            <div class="table-cell date" title="{{file.nice_date}}">{{file.ago}}</div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}